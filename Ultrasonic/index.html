<!DOCTYPE HTML>
<!--
	Stellar by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>

<head>
	<title>Ultrasonic Lesson</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
	<link rel="stylesheet" href="/assets/css/main.css" />
	<link rel="stylesheet" href="/assets/prism/prism.css" />
	<!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
	<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
</head>

<body>

	<!-- Wrapper -->
	<div id="wrapper">

		<!-- Header -->
		<header id="header">
			<span class="logo"><a href="/" id = "title_link" ><img src="/images/logo.svg"/></a></span>
			<h1>Ultrasonic Lesson</h1>
			<p>How to measure distance with sound</p>
		</header>

		<nav id="nav">
			<ul>
				<li><a href="#intro" class="active">Introduction</a></li>
				<li><a href="#components">Components</a></li>
				<li><a href="#steps">Step-by-step</a></li>
				<li><a href="#code">Code</a></li>
				<!-- <li><a href="#cta">List of lessons</a></li> -->
			</ul>
		</nav>

		<!-- Main -->
		<div id="main">

			<!-- Content -->
			<section id="intro" class="main">
				<span class="image main"><img src="images/Ultrasonic_top_image.jpg" alt="" /></span>

				<h1>Introduction</h1>

				<p>In this tutorial, we will be showing you how to use the ultrasonic sensor with the Arduino. </p>

				<hr />
				<h2>Components you need</h2>
				<ul>
					<li>Arduino UNO or similar</li>
					<li>Breadboard</li>
					<li>Jumper Wires</li>
					<li>HC-SR04: Ultrasonic sensor</li>
				</ul>
			</section>

			<section id="components" class="main">
				<div>
					<h1>New Components</h1>
					<h2>Ultrasonic sensor</h2>
					<p>The ultrasonic sensor has 4 connection pins as shown in the figure below:</p>
					<div class="6u"><span class="image fit"><img src="images/hc-sr04_pin_diagram.jpg" alt="" /></span></div>
					<p>As with all electronic components that need to be powered up, the ultrasonic sensor has both ther GND and 5V pins, that will connect to the corresponding power pins on the Arduino.</p>
					<p>The <b>TRIG</b> pin is used for input. We will use it to activate the sensor so that it sends out an ultrasonic wave.</p>
					<p>The <b>ECHO</b> pin is used for output. We will use it to receive the time travelled by the wave from which we can deduce the distance through simple calculations.</p>
				</div>
			</section>

			<section id="steps" class="main">
				<h1>Connecting step-by-step</h1>

				<div>
					<h2>Step 1</h2>
					<div class="6u"><span class="image fit"><img src="images/Ultrasonic_connect_power.jpg" alt="" /></span></div>
					<p>First, connect GND to the negative power row (blue) of the breadboard and 5V to the positive power row (red).</p>
				</div>


				<hr />
				<div>
					<h2>Step 2</h2>
					<div class="6u"><span class="image fit"><img src="images/Ultrasonic_connect_to_power.jpg" alt="" /></span></div>
					<p>Next, connect the negative power row of the breadboard to a column and the positive power row to another column, leaving 2 columns in between.</p>
					<p></p>
				</div>

				<hr />
				<div>
					<h2>Step 3</h2>
					<div class="6u"><span class="image fit"><img src="images/Ultrasonic_connect_trig.jpg" alt="" /></span></div>
					<p>Now connect the TRIG pin to pin number <code class="language-clike">10</code> on the Arduino.</p>
					<p></p>
				</div>

				<hr />
				<div>
					<h2>Step 4</h2>
					<div class="6u"><span class="image fit"><img src="images/Ultrasonic_connect_echo.jpg" alt="" /></span></div>
					<p>Connect the ECHO pin to pin number <code class="language-clike">11</code> on the Arduino.</p>
					<p></p>
				</div>


				<hr />
				<div>
					<h2>Step 5</h2>
					<div class="6u"><span class="image fit"><img src="images/Ultrasonic_insert_sensor.jpg" alt="" /></span></div>
					<p>Insert the sensor so that the pins on the sensor are in the right columns.</p>
					<p>The final circuit should look similar to the diagram below:</p>
					<div class="6u"><span class="image fit"><img src="images/Ultrasonic_circuit.jpg"/></span></div>
				</div>


			</section>

			<section id="code" class="main">
				<h1>Code</h1>

				<p>
					In this section, you will learn how to write the code for controlling the servo motor. You will be able to set an angle for the rotation of the servo motor. <br> As we did in the previous tutorial, we have put the code below so you can read it once
					and then will run you through it.
				</p>

				<hr />
				<h2>Install NewPing library</h2>
				<p><a href="http://playground.arduino.cc/Code/NewPing">Library page</a>. Download and install with provided instructions.</p>

				<hr />
				<h2>Measure distance</h2>
				<pre class="language-clike line-numbers" data-src="Ultrasonic.ino"></pre>
				<!-- <pre class="language-processing line-numbers" data-src="ProcessingRadar.pde"></pre> -->

				<hr />
				<h2>Code explanation</h2>

				<h3>Add NewPing library</h3>
				<code class="language-clike">#include &lt;NewPing.h></code>
				<p>Imports the code needed to use the ultrasonic sensor</p>
				<p>This pre-written code can help us to use the sensor. </p>


				<h3>Set the sensor settings</h3>
				<code class="language-clike" style=display:block;white-space:pre-wrap>
#define TRIGGER_PIN  10
#define ECHO_PIN     11
#define MAX_DISTANCE 200
					</code>
				<p>Define the pins we connected to the sensors.</p>


				<h3>Initialize object</h3>
				<code class="language-clike">NewPing sonar(TRIGGER_PIN, ECHO_PIN, MAX_DISTANCE);</code>
				<p>Initialises the ultrasonic sensor object object with the pins and maximum distance as parameters.</p>
				<p>If the object is farther away (in cm) than <code class="language-clike">MAX_DISTANCE</code> the sensor will not detect it.</p>

				<h3>Create distance variable</h3>
				<code class="language-clike">int distanceCM = 0;</code>
				<p>Sets the distance to a default value of <code class="language-clike">0</code>.</p>


				<h3>Delay</h3>
				<code class="language-clike">delay(50);</code>
				<p>The distance will be measured every <code class="language-clike">50</code> milliseconds (20 times per second).</p>

				<h3>Measure distance</h3>
				<code class="language-clike">distanceCM = sonar.ping_cm();</code>
				<p>The library makes the distance measurement very easy. The result is saved as integer in the variable <code class="language-clike">distanceCM</code> and can be used.</p>

				<hr />
				<h2>Exercises</h2>

				<h3>Exercise 1</h3>
				<p>As an exercise, also store the distance in inches in a seperate variable. <code>1 inch = 2.54 cm</code></p>
				<p>Is there an easier way to do this (existing function)? Find out by reading the <a href="http://playground.arduino.cc/Code/NewPing">documentation for the NewPing library</a>.</p>

				<h3>Exercise 2</h3>
				<p>Change the time between measurements.</p>
				<p><i>Is there a lower limit for the pause between measurements?</i></p>

				<h3>Exercise 3</h3>
				<p>Blink an LED if an object is within a certain range, for example between <code>11cm</code> and <code>121cm</code></p>




				<hr />
				<h2>Challenge</h2>
				<p>Move a servo in relationship to the ultrasonic distance measurement. You could control the servo with your hand.</p>
				<p>For example a distance of <code>5cm</code> could mean an angle <code>0</code>. Distance <code>98cm</code> could be <code>180</code> degrees.</p>
				<p><i>Hint: </i> <a href="https://www.arduino.cc/en/reference/map">Find out</a> about the <code class="language-clike">map</code> function.</p>


				<div style="text-align: right">
					<a href="/Serial" class="button special icon chevron-right">Next Lesson</a>
					<a href="/Servo" class="button special icon fa-chevron-left" style="float:left">Previous Lesson</a>
				</div>
			</section>

			<!-- <section id="code" class="main">
			</section> -->

		</div>

		<!-- Footer -->
		<footer id="footer">
			<section>
				<h2>About</h2>
				<p>Created by Nadim and David</p>
				<ul class="actions">
					<li><a href="/about" class="button">Learn More</a></li>
				</ul>
			</section>
			<section>
				<h2>Contact us</h2>
				<dl class="alt">
					<dt>Email</dt>
					<dd><a href="#">nadim.gomez.16@ucl.ac.uk</a></dd>
					<dd><a href="#">david.stepanovs.16@ucl.ac.uk</a></dd>
				</dl>
				<ul class="icons">
					<!-- <li><a href="#" class="icon fa-github alt"><span class="label">GitHub</span></a></li> -->
				</ul>
			</section>
			<p class="copyright">&copy; N&amp;D. Design: <a href="https://html5up.net">HTML5 UP</a>.</p>
		</footer>

	</div>

	<!-- Scripts -->
	<script src="/assets/js/jquery.min.js"></script>
	<script src="/assets/js/jquery.scrollex.min.js"></script>
	<script src="/assets/js/jquery.scrolly.min.js"></script>
	<script src="/assets/js/skel.min.js"></script>
	<script src="/assets/js/util.js"></script>
	<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
	<script src="/assets/js/main.js"></script>
	<script src="/assets/prism/prism.js"></script>

</body>

</html>
